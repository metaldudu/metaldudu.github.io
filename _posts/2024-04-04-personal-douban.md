---
layout: post
title: "自建豆瓣书影记录系统"
category: tech
tags: [豆瓣]
---

年初有个想法，能脱离豆瓣平台，或者有自己的记录系统，以减少依赖。另外一个重要原因，是某些豆瓣不存在条目无法记录，而且评论审核严格，这个只会越来越严重。

开始用了把[豆坟](https://blog.doufen.org/)导出数据转换成 csv 格式，然后用 python 转换成 html 表格展示，但书和电影数据超过3000条，文件就很大，需要分页展示。这种方法很适合小文件发布静态站点，早期 vimwiki 就有这么生成的。

于是更换到 mysql 数据库，使用 bottle 框架做了简单的展示页面，以及添加和修改功能，页面渲染使用 css 框架 [chota](https://jenil.github.io/chota/)

数据结构方面借鉴了曾经尝试过的文献管理软件 Zotero ，把书、影、剧、游四种条目放到一张表里，按类别分类，条目对应其他平台网址的 id ，比如书对应 GoodRead 、影视对应 TMDB 、游戏对应 STEAM 。前期数据从豆瓣导入，之后就手动添加，批量维护用数据库工具。

目前除了展示已标记过的书、影、剧、游，还可以根据标题和作者查询，另外加上数据统计功能，以及历史上的今天功能，每天打开可以看到过去标记过的内容，偶尔会有惊喜，或给评论加上几笔，又或者再温习一遍。

整个过程依赖 ChatGPT 帮忙，能满足需求。看到近20年的数据在手，比较安心，以后来日方长。